<!DOCTYPE html>

<html>

<head>

<meta name="viewport" content="width=device-width, initial-scale=0.86, maximum-scale=3.0, minimum-scale=0.86">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"/>
<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>

<style>
           
body {
    font-family: monospace;
    font-size: medium;
}
table {
    font-family: monospace;
    font-size: medium;
    border-spacing: 0px;
    border-collapse: collapse;
}
#reportTable tr:hover {
    background-color: lightblue;
} 
#reportTable tr.referenceAllele {
    font-weight: bold;
}
#reportTable tr.selection1, tr.selection1:hover, #selection1 {
    background-color: orange;
}
#reportTable tr.selection2, tr.selection2:hover, #selection2 {
    background-color: lightgreen;
}
#reportTable tr.selection1.selection2, tr.selection1.selection2:hover, #selection1and2 {
    background: repeating-linear-gradient(to right, orange, lightgreen, orange, lightgreen, orange, lightgreen, orange, lightgreen, orange, lightgreen, orange, lightgreen, orange, lightgreen, orange, lightgreen);
}
th, td {
    text-align: center;
    white-space: nowrap;
}
th.index, td.index {
    border-left: 3px solid black;
}
th.alleleName, td.alleleName {
    text-align: left;
}
th.hvrId, td.hvrId {
    text-align: center;
}
th.codon, td.codon {
    text-align: right;
}
td.codon.hypervariableRegion {
    font-weight: bold;
    border: 1px solid black;
}
td.codon.index.hypervariableRegion {
    font-weight: bold;
    border-top:    1px solid black;
    border-right:  1px solid black;
    border-bottom: 1px solid black;
    border-left:   3px solid black;
}
td.mismatch {
    background-color: lightgray;
}
a.filterEnabled {
    background-color: yellow;
}
a.sortEnabled {
    background-color: yellow;
}
a.sort {
    font-size: large;
}

</style>

<title>HLA-DPB1 Allele Difference Report</title>
        
</head>

<body>

    <div id="working" style="position: fixed; top: 0px; width: 150px; left: 50%; margin-left: -75px; text-align: center; background-color: red; color: white; font-weight: bold;">working...</div>

    <h1>HLA-DPB1 Allele Difference Report (<a href="https://github.com/ghsmith/hladpb1/blob/master/hladpb1-webServices/src/main/webapp/ajaxDifferenceReportPaginated.html">source code</a>)</h1>

    <p>
        This is the paginated version of the report. An <a href="/hladpb1/ajaxDifferenceReport.html">unpaginated version</a>
        is also available, but may perform slowly on some clients.
    </p>
    <p>
        The reference allele for hypervariable region matching is highlighted in
        yellow. This report only shows the longest protein sequence allele number for synonymous
        alleles. Select a reference allele from the list or click on a row to
        set that allele as the reference allele. By default, this report only
        shows alleles where there are at least 4 hypervariable region matches to
        the reference allele, but you may toggle this filter on and off.
    </p>   
    <p>
        The IMGT allele database version is <span id="imgtDbVersion">...</span>
        and the single antigen bead (SAB) reagent lot number is
        <select id="reagentLotNumberSelect"></select>. The session ID is
        <span id="sessionId">...</span>
        (<a id="resetSessionLink" href="javascript:void(0);">reset session</a>).
    </p>
    <p>
        Custom <a href="https://github.com/IHIW/Converters/blob/master/IHIW-haml_version_w0_3_3.xsd">HAML</a> panel:
        <input id="hamlFile" type="file" name="file" style="border: 1px solid lightgray;"/>
        <input id="uploadHamlButton" type="button" value="Upload"/>
    </p>
    <p>
        This report is for research use only.
    </p>
    <div style="margin-top: 10px; margin-bottom: 10px; border: 1px solid black; width: 100%; background-color: lightgray;">
        <table style="width: 100%;"><tr>
            <td style="text-align: left; white-space: nowrap;"><a id="linkPrevPage" href="javascript:void(0)">&Longleftarrow; previous page<a></td>
            <td style="text-align: center; white-space: nowrap;">
                page number:<select id="selectPage"></select>
                (size:<input type="text" id="inputPageSize" size="4">)
            <td>
            <td style="text-align: right; white-space: nowrap;"><a id="linkNextPage" href="javascript:void(0)">next page &Longrightarrow;<a></td>
        </tr></table>
    </div>
    <p>
        clicked allele(s): <span id="selection1">&nbsp;L=<span id="selection1-count">0</span>&nbsp;</span> <span id ="selection1and2">L&amp;R=<span id="selection1and2-count">0</span></span> <span id="selection2">&nbsp;R=<span id="selection2-count">0</span>&nbsp;</span> [<a id="selectionFilter" href="javascript:void(0);">filter=<i>clicked</i></a>] [<a id="refilter" href="javascript:void(0);">refilter</a>]
    </p>
    <p>
        reference allele: <select id="referenceAlleleSelect"></select>
    </p>
    
    <table id="reportTable">
        <thead>
            <tr>
                <th class="alleleName">&nbsp;</th>
                <th>[<a id="sabFilter" href="javascript:void(0);">filter=Y</a>]</th>
                <th>&nbsp;</th>
                <th>[<a id="matchesHvrCountGe4Filter" href="javascript:void(0);">filter&ge;4)</a>]</th>
                <th colspan="7" style="border-bottom: 1px solid black;">hypervariable<br/>region ID</th>
                <th>&nbsp;</th>
                <th colspan="100" style="border-bottom: 1px solid black;">protein sequence (aligned to HLA-DPB1*01:01 codons 1-100)</th>
            </tr>
            <tr id="columnNames">
                <th data-name="allele.alleleName" class="alleleName">allele name</th>
                <th data-name="allele.singleAntigenBead ? 'Y' : '&nbsp;'">SAB</th>
                <th data-name="allele.mfi">MFI</th>
                <th data-name="allele.matchesHvrCount" class="matches">matches</th>
                <th data-hvr="a" data-name="'a' + allele.hvrVariantMap['a'].variantId" data-container="allele.hvrVariantMap['a']" class="hvrId">a</th>
                <th data-hvr="b" data-name="'b' + allele.hvrVariantMap['b'].variantId" data-container="allele.hvrVariantMap['b']" class="hvrId">b</th>
                <th data-hvr="c" data-name="'c' + allele.hvrVariantMap['c'].variantId" data-container="allele.hvrVariantMap['c']" class="hvrId">c</th>
                <th data-hvr="d" data-name="'d' + allele.hvrVariantMap['d'].variantId" data-container="allele.hvrVariantMap['d']" class="hvrId">d</th>
                <th data-hvr="e" data-name="'e' + allele.hvrVariantMap['e'].variantId" data-container="allele.hvrVariantMap['e']" class="hvrId">e</th>
                <th data-hvr="f" data-name="'f' + allele.hvrVariantMap['f'].variantId" data-container="allele.hvrVariantMap['f']" class="hvrId">f</th>
                <th data-hvr="g" data-name="'g' + allele.hvrVariantMap['g'].variantId" data-container="allele.hvrVariantMap['g']" class="hvrId">g</th>
                <th>&nbsp;</th>
                <th data-name="allele.codonMap['1'] == undefined ? '&nbsp;' : allele.codonMap['1'].aminoAcid" data-container="allele.codonMap['1'] == undefined ? '' : allele.codonMap['1']" class="codon index ">1</th><th data-name="allele.codonMap['2'] == undefined ? '&nbsp;' : allele.codonMap['2'].aminoAcid" data-container="allele.codonMap['2'] == undefined ? '' : allele.codonMap['2']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['3'] == undefined ? '&nbsp;' : allele.codonMap['3'].aminoAcid" data-container="allele.codonMap['3'] == undefined ? '' : allele.codonMap['3']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['4'] == undefined ? '&nbsp;' : allele.codonMap['4'].aminoAcid" data-container="allele.codonMap['4'] == undefined ? '' : allele.codonMap['4']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['5'] == undefined ? '&nbsp;' : allele.codonMap['5'].aminoAcid" data-container="allele.codonMap['5'] == undefined ? '' : allele.codonMap['5']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['6'] == undefined ? '&nbsp;' : allele.codonMap['6'].aminoAcid" data-container="allele.codonMap['6'] == undefined ? '' : allele.codonMap['6']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['7'] == undefined ? '&nbsp;' : allele.codonMap['7'].aminoAcid" data-container="allele.codonMap['7'] == undefined ? '' : allele.codonMap['7']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['8'] == undefined ? '&nbsp;' : allele.codonMap['8'].aminoAcid" data-container="allele.codonMap['8'] == undefined ? '' : allele.codonMap['8']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['9'] == undefined ? '&nbsp;' : allele.codonMap['9'].aminoAcid" data-container="allele.codonMap['9'] == undefined ? '' : allele.codonMap['9']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['10'] == undefined ? '&nbsp;' : allele.codonMap['10'].aminoAcid" data-container="allele.codonMap['10'] == undefined ? '' : allele.codonMap['10']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['11'] == undefined ? '&nbsp;' : allele.codonMap['11'].aminoAcid" data-container="allele.codonMap['11'] == undefined ? '' : allele.codonMap['11']" class="codon index ">11</th><th data-name="allele.codonMap['12'] == undefined ? '&nbsp;' : allele.codonMap['12'].aminoAcid" data-container="allele.codonMap['12'] == undefined ? '' : allele.codonMap['12']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['13'] == undefined ? '&nbsp;' : allele.codonMap['13'].aminoAcid" data-container="allele.codonMap['13'] == undefined ? '' : allele.codonMap['13']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['14'] == undefined ? '&nbsp;' : allele.codonMap['14'].aminoAcid" data-container="allele.codonMap['14'] == undefined ? '' : allele.codonMap['14']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['15'] == undefined ? '&nbsp;' : allele.codonMap['15'].aminoAcid" data-container="allele.codonMap['15'] == undefined ? '' : allele.codonMap['15']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['16'] == undefined ? '&nbsp;' : allele.codonMap['16'].aminoAcid" data-container="allele.codonMap['16'] == undefined ? '' : allele.codonMap['16']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['17'] == undefined ? '&nbsp;' : allele.codonMap['17'].aminoAcid" data-container="allele.codonMap['17'] == undefined ? '' : allele.codonMap['17']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['18'] == undefined ? '&nbsp;' : allele.codonMap['18'].aminoAcid" data-container="allele.codonMap['18'] == undefined ? '' : allele.codonMap['18']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['19'] == undefined ? '&nbsp;' : allele.codonMap['19'].aminoAcid" data-container="allele.codonMap['19'] == undefined ? '' : allele.codonMap['19']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['20'] == undefined ? '&nbsp;' : allele.codonMap['20'].aminoAcid" data-container="allele.codonMap['20'] == undefined ? '' : allele.codonMap['20']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['21'] == undefined ? '&nbsp;' : allele.codonMap['21'].aminoAcid" data-container="allele.codonMap['21'] == undefined ? '' : allele.codonMap['21']" class="codon index ">21</th><th data-name="allele.codonMap['22'] == undefined ? '&nbsp;' : allele.codonMap['22'].aminoAcid" data-container="allele.codonMap['22'] == undefined ? '' : allele.codonMap['22']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['23'] == undefined ? '&nbsp;' : allele.codonMap['23'].aminoAcid" data-container="allele.codonMap['23'] == undefined ? '' : allele.codonMap['23']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['24'] == undefined ? '&nbsp;' : allele.codonMap['24'].aminoAcid" data-container="allele.codonMap['24'] == undefined ? '' : allele.codonMap['24']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['25'] == undefined ? '&nbsp;' : allele.codonMap['25'].aminoAcid" data-container="allele.codonMap['25'] == undefined ? '' : allele.codonMap['25']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['26'] == undefined ? '&nbsp;' : allele.codonMap['26'].aminoAcid" data-container="allele.codonMap['26'] == undefined ? '' : allele.codonMap['26']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['27'] == undefined ? '&nbsp;' : allele.codonMap['27'].aminoAcid" data-container="allele.codonMap['27'] == undefined ? '' : allele.codonMap['27']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['28'] == undefined ? '&nbsp;' : allele.codonMap['28'].aminoAcid" data-container="allele.codonMap['28'] == undefined ? '' : allele.codonMap['28']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['29'] == undefined ? '&nbsp;' : allele.codonMap['29'].aminoAcid" data-container="allele.codonMap['29'] == undefined ? '' : allele.codonMap['29']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['30'] == undefined ? '&nbsp;' : allele.codonMap['30'].aminoAcid" data-container="allele.codonMap['30'] == undefined ? '' : allele.codonMap['30']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['31'] == undefined ? '&nbsp;' : allele.codonMap['31'].aminoAcid" data-container="allele.codonMap['31'] == undefined ? '' : allele.codonMap['31']" class="codon index ">31</th><th data-name="allele.codonMap['32'] == undefined ? '&nbsp;' : allele.codonMap['32'].aminoAcid" data-container="allele.codonMap['32'] == undefined ? '' : allele.codonMap['32']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['33'] == undefined ? '&nbsp;' : allele.codonMap['33'].aminoAcid" data-container="allele.codonMap['33'] == undefined ? '' : allele.codonMap['33']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['34'] == undefined ? '&nbsp;' : allele.codonMap['34'].aminoAcid" data-container="allele.codonMap['34'] == undefined ? '' : allele.codonMap['34']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['35'] == undefined ? '&nbsp;' : allele.codonMap['35'].aminoAcid" data-container="allele.codonMap['35'] == undefined ? '' : allele.codonMap['35']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['36'] == undefined ? '&nbsp;' : allele.codonMap['36'].aminoAcid" data-container="allele.codonMap['36'] == undefined ? '' : allele.codonMap['36']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['37'] == undefined ? '&nbsp;' : allele.codonMap['37'].aminoAcid" data-container="allele.codonMap['37'] == undefined ? '' : allele.codonMap['37']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['38'] == undefined ? '&nbsp;' : allele.codonMap['38'].aminoAcid" data-container="allele.codonMap['38'] == undefined ? '' : allele.codonMap['38']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['39'] == undefined ? '&nbsp;' : allele.codonMap['39'].aminoAcid" data-container="allele.codonMap['39'] == undefined ? '' : allele.codonMap['39']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['40'] == undefined ? '&nbsp;' : allele.codonMap['40'].aminoAcid" data-container="allele.codonMap['40'] == undefined ? '' : allele.codonMap['40']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['41'] == undefined ? '&nbsp;' : allele.codonMap['41'].aminoAcid" data-container="allele.codonMap['41'] == undefined ? '' : allele.codonMap['41']" class="codon index ">41</th><th data-name="allele.codonMap['42'] == undefined ? '&nbsp;' : allele.codonMap['42'].aminoAcid" data-container="allele.codonMap['42'] == undefined ? '' : allele.codonMap['42']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['43'] == undefined ? '&nbsp;' : allele.codonMap['43'].aminoAcid" data-container="allele.codonMap['43'] == undefined ? '' : allele.codonMap['43']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['44'] == undefined ? '&nbsp;' : allele.codonMap['44'].aminoAcid" data-container="allele.codonMap['44'] == undefined ? '' : allele.codonMap['44']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['45'] == undefined ? '&nbsp;' : allele.codonMap['45'].aminoAcid" data-container="allele.codonMap['45'] == undefined ? '' : allele.codonMap['45']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['46'] == undefined ? '&nbsp;' : allele.codonMap['46'].aminoAcid" data-container="allele.codonMap['46'] == undefined ? '' : allele.codonMap['46']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['47'] == undefined ? '&nbsp;' : allele.codonMap['47'].aminoAcid" data-container="allele.codonMap['47'] == undefined ? '' : allele.codonMap['47']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['48'] == undefined ? '&nbsp;' : allele.codonMap['48'].aminoAcid" data-container="allele.codonMap['48'] == undefined ? '' : allele.codonMap['48']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['49'] == undefined ? '&nbsp;' : allele.codonMap['49'].aminoAcid" data-container="allele.codonMap['49'] == undefined ? '' : allele.codonMap['49']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['50'] == undefined ? '&nbsp;' : allele.codonMap['50'].aminoAcid" data-container="allele.codonMap['50'] == undefined ? '' : allele.codonMap['50']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['51'] == undefined ? '&nbsp;' : allele.codonMap['51'].aminoAcid" data-container="allele.codonMap['51'] == undefined ? '' : allele.codonMap['51']" class="codon index ">51</th><th data-name="allele.codonMap['52'] == undefined ? '&nbsp;' : allele.codonMap['52'].aminoAcid" data-container="allele.codonMap['52'] == undefined ? '' : allele.codonMap['52']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['53'] == undefined ? '&nbsp;' : allele.codonMap['53'].aminoAcid" data-container="allele.codonMap['53'] == undefined ? '' : allele.codonMap['53']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['54'] == undefined ? '&nbsp;' : allele.codonMap['54'].aminoAcid" data-container="allele.codonMap['54'] == undefined ? '' : allele.codonMap['54']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['55'] == undefined ? '&nbsp;' : allele.codonMap['55'].aminoAcid" data-container="allele.codonMap['55'] == undefined ? '' : allele.codonMap['55']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['56'] == undefined ? '&nbsp;' : allele.codonMap['56'].aminoAcid" data-container="allele.codonMap['56'] == undefined ? '' : allele.codonMap['56']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['57'] == undefined ? '&nbsp;' : allele.codonMap['57'].aminoAcid" data-container="allele.codonMap['57'] == undefined ? '' : allele.codonMap['57']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['58'] == undefined ? '&nbsp;' : allele.codonMap['58'].aminoAcid" data-container="allele.codonMap['58'] == undefined ? '' : allele.codonMap['58']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['59'] == undefined ? '&nbsp;' : allele.codonMap['59'].aminoAcid" data-container="allele.codonMap['59'] == undefined ? '' : allele.codonMap['59']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['60'] == undefined ? '&nbsp;' : allele.codonMap['60'].aminoAcid" data-container="allele.codonMap['60'] == undefined ? '' : allele.codonMap['60']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['61'] == undefined ? '&nbsp;' : allele.codonMap['61'].aminoAcid" data-container="allele.codonMap['61'] == undefined ? '' : allele.codonMap['61']" class="codon index ">61</th><th data-name="allele.codonMap['62'] == undefined ? '&nbsp;' : allele.codonMap['62'].aminoAcid" data-container="allele.codonMap['62'] == undefined ? '' : allele.codonMap['62']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['63'] == undefined ? '&nbsp;' : allele.codonMap['63'].aminoAcid" data-container="allele.codonMap['63'] == undefined ? '' : allele.codonMap['63']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['64'] == undefined ? '&nbsp;' : allele.codonMap['64'].aminoAcid" data-container="allele.codonMap['64'] == undefined ? '' : allele.codonMap['64']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['65'] == undefined ? '&nbsp;' : allele.codonMap['65'].aminoAcid" data-container="allele.codonMap['65'] == undefined ? '' : allele.codonMap['65']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['66'] == undefined ? '&nbsp;' : allele.codonMap['66'].aminoAcid" data-container="allele.codonMap['66'] == undefined ? '' : allele.codonMap['66']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['67'] == undefined ? '&nbsp;' : allele.codonMap['67'].aminoAcid" data-container="allele.codonMap['67'] == undefined ? '' : allele.codonMap['67']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['68'] == undefined ? '&nbsp;' : allele.codonMap['68'].aminoAcid" data-container="allele.codonMap['68'] == undefined ? '' : allele.codonMap['68']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['69'] == undefined ? '&nbsp;' : allele.codonMap['69'].aminoAcid" data-container="allele.codonMap['69'] == undefined ? '' : allele.codonMap['69']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['70'] == undefined ? '&nbsp;' : allele.codonMap['70'].aminoAcid" data-container="allele.codonMap['70'] == undefined ? '' : allele.codonMap['70']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['71'] == undefined ? '&nbsp;' : allele.codonMap['71'].aminoAcid" data-container="allele.codonMap['71'] == undefined ? '' : allele.codonMap['71']" class="codon index ">71</th><th data-name="allele.codonMap['72'] == undefined ? '&nbsp;' : allele.codonMap['72'].aminoAcid" data-container="allele.codonMap['72'] == undefined ? '' : allele.codonMap['72']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['73'] == undefined ? '&nbsp;' : allele.codonMap['73'].aminoAcid" data-container="allele.codonMap['73'] == undefined ? '' : allele.codonMap['73']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['74'] == undefined ? '&nbsp;' : allele.codonMap['74'].aminoAcid" data-container="allele.codonMap['74'] == undefined ? '' : allele.codonMap['74']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['75'] == undefined ? '&nbsp;' : allele.codonMap['75'].aminoAcid" data-container="allele.codonMap['75'] == undefined ? '' : allele.codonMap['75']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['76'] == undefined ? '&nbsp;' : allele.codonMap['76'].aminoAcid" data-container="allele.codonMap['76'] == undefined ? '' : allele.codonMap['76']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['77'] == undefined ? '&nbsp;' : allele.codonMap['77'].aminoAcid" data-container="allele.codonMap['77'] == undefined ? '' : allele.codonMap['77']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['78'] == undefined ? '&nbsp;' : allele.codonMap['78'].aminoAcid" data-container="allele.codonMap['78'] == undefined ? '' : allele.codonMap['78']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['79'] == undefined ? '&nbsp;' : allele.codonMap['79'].aminoAcid" data-container="allele.codonMap['79'] == undefined ? '' : allele.codonMap['79']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['80'] == undefined ? '&nbsp;' : allele.codonMap['80'].aminoAcid" data-container="allele.codonMap['80'] == undefined ? '' : allele.codonMap['80']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['81'] == undefined ? '&nbsp;' : allele.codonMap['81'].aminoAcid" data-container="allele.codonMap['81'] == undefined ? '' : allele.codonMap['81']" class="codon index ">81</th><th data-name="allele.codonMap['82'] == undefined ? '&nbsp;' : allele.codonMap['82'].aminoAcid" data-container="allele.codonMap['82'] == undefined ? '' : allele.codonMap['82']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['83'] == undefined ? '&nbsp;' : allele.codonMap['83'].aminoAcid" data-container="allele.codonMap['83'] == undefined ? '' : allele.codonMap['83']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['84'] == undefined ? '&nbsp;' : allele.codonMap['84'].aminoAcid" data-container="allele.codonMap['84'] == undefined ? '' : allele.codonMap['84']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['85'] == undefined ? '&nbsp;' : allele.codonMap['85'].aminoAcid" data-container="allele.codonMap['85'] == undefined ? '' : allele.codonMap['85']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['86'] == undefined ? '&nbsp;' : allele.codonMap['86'].aminoAcid" data-container="allele.codonMap['86'] == undefined ? '' : allele.codonMap['86']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['87'] == undefined ? '&nbsp;' : allele.codonMap['87'].aminoAcid" data-container="allele.codonMap['87'] == undefined ? '' : allele.codonMap['87']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['88'] == undefined ? '&nbsp;' : allele.codonMap['88'].aminoAcid" data-container="allele.codonMap['88'] == undefined ? '' : allele.codonMap['88']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['89'] == undefined ? '&nbsp;' : allele.codonMap['89'].aminoAcid" data-container="allele.codonMap['89'] == undefined ? '' : allele.codonMap['89']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['90'] == undefined ? '&nbsp;' : allele.codonMap['90'].aminoAcid" data-container="allele.codonMap['90'] == undefined ? '' : allele.codonMap['90']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['91'] == undefined ? '&nbsp;' : allele.codonMap['91'].aminoAcid" data-container="allele.codonMap['91'] == undefined ? '' : allele.codonMap['91']" class="codon index ">91</th><th data-name="allele.codonMap['92'] == undefined ? '&nbsp;' : allele.codonMap['92'].aminoAcid" data-container="allele.codonMap['92'] == undefined ? '' : allele.codonMap['92']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['93'] == undefined ? '&nbsp;' : allele.codonMap['93'].aminoAcid" data-container="allele.codonMap['93'] == undefined ? '' : allele.codonMap['93']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['94'] == undefined ? '&nbsp;' : allele.codonMap['94'].aminoAcid" data-container="allele.codonMap['94'] == undefined ? '' : allele.codonMap['94']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['95'] == undefined ? '&nbsp;' : allele.codonMap['95'].aminoAcid" data-container="allele.codonMap['95'] == undefined ? '' : allele.codonMap['95']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['96'] == undefined ? '&nbsp;' : allele.codonMap['96'].aminoAcid" data-container="allele.codonMap['96'] == undefined ? '' : allele.codonMap['96']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['97'] == undefined ? '&nbsp;' : allele.codonMap['97'].aminoAcid" data-container="allele.codonMap['97'] == undefined ? '' : allele.codonMap['97']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['98'] == undefined ? '&nbsp;' : allele.codonMap['98'].aminoAcid" data-container="allele.codonMap['98'] == undefined ? '' : allele.codonMap['98']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['99'] == undefined ? '&nbsp;' : allele.codonMap['99'].aminoAcid" data-container="allele.codonMap['99'] == undefined ? '' : allele.codonMap['99']" class="codon ">&nbsp;</th><th data-name="allele.codonMap['100'] == undefined ? '&nbsp;' : allele.codonMap['100'].aminoAcid" data-container="allele.codonMap['100'] == undefined ? '' : allele.codonMap['100']" class="codon">&nbsp;</th>
            </tr>
            <tr id="hypervariableRegionNames">
                <th style="text-align: left;">[<a class="sort alleleNameSort" href="javascript:void(0);">&darr;</a>]</th>
                <th>&nbsp;</th>
                <th>[<a class="sort mfiSort" href="javascript:void(0);">&darr;</a>]</th>
                <th>[<a class="sort matchesSort" href="javascript:void(0);">&darr;</a>]</th>
                <th>[<a class="sort hvrvSort hvrvSort-a" data-hvr="a" href="javascript:void(0);">&darr;</a>]</th>
                <th>[<a class="sort hvrvSort hvrvSort-b" data-hvr="b" href="javascript:void(0);">&darr;</a>]</th>
                <th>[<a class="sort hvrvSort hvrvSort-c" data-hvr="c" href="javascript:void(0);">&darr;</a>]</th>
                <th>[<a class="sort hvrvSort hvrvSort-d" data-hvr="d" href="javascript:void(0);">&darr;</a>]</th>
                <th>[<a class="sort hvrvSort hvrvSort-e" data-hvr="e" href="javascript:void(0);">&darr;</a>]</th>
                <th>[<a class="sort hvrvSort hvrvSort-f" data-hvr="f" href="javascript:void(0);">&darr;</a>]</th>
                <th>[<a class="sort hvrvSort hvrvSort-g" data-hvr="g" href="javascript:void(0);">&darr;</a>]</th>
                <th>&nbsp;</th>
                <th data-name="allele.codonMap['1'] == undefined ? '&nbsp;' : allele.codonMap['1'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['2'] == undefined ? '&nbsp;' : allele.codonMap['2'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['3'] == undefined ? '&nbsp;' : allele.codonMap['3'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['4'] == undefined ? '&nbsp;' : allele.codonMap['4'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['5'] == undefined ? '&nbsp;' : allele.codonMap['5'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['6'] == undefined ? '&nbsp;' : allele.codonMap['6'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['7'] == undefined ? '&nbsp;' : allele.codonMap['7'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['8'] == undefined ? '&nbsp;' : allele.codonMap['8'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['9'] == undefined ? '&nbsp;' : allele.codonMap['9'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['10'] == undefined ? '&nbsp;' : allele.codonMap['10'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['11'] == undefined ? '&nbsp;' : allele.codonMap['11'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['12'] == undefined ? '&nbsp;' : allele.codonMap['12'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['13'] == undefined ? '&nbsp;' : allele.codonMap['13'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['14'] == undefined ? '&nbsp;' : allele.codonMap['14'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['15'] == undefined ? '&nbsp;' : allele.codonMap['15'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['16'] == undefined ? '&nbsp;' : allele.codonMap['16'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['17'] == undefined ? '&nbsp;' : allele.codonMap['17'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['18'] == undefined ? '&nbsp;' : allele.codonMap['18'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['19'] == undefined ? '&nbsp;' : allele.codonMap['19'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['20'] == undefined ? '&nbsp;' : allele.codonMap['20'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['21'] == undefined ? '&nbsp;' : allele.codonMap['21'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['22'] == undefined ? '&nbsp;' : allele.codonMap['22'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['23'] == undefined ? '&nbsp;' : allele.codonMap['23'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['24'] == undefined ? '&nbsp;' : allele.codonMap['24'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['25'] == undefined ? '&nbsp;' : allele.codonMap['25'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['26'] == undefined ? '&nbsp;' : allele.codonMap['26'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['27'] == undefined ? '&nbsp;' : allele.codonMap['27'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['28'] == undefined ? '&nbsp;' : allele.codonMap['28'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['29'] == undefined ? '&nbsp;' : allele.codonMap['29'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['30'] == undefined ? '&nbsp;' : allele.codonMap['30'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['31'] == undefined ? '&nbsp;' : allele.codonMap['31'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['32'] == undefined ? '&nbsp;' : allele.codonMap['32'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['33'] == undefined ? '&nbsp;' : allele.codonMap['33'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['34'] == undefined ? '&nbsp;' : allele.codonMap['34'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['35'] == undefined ? '&nbsp;' : allele.codonMap['35'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['36'] == undefined ? '&nbsp;' : allele.codonMap['36'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['37'] == undefined ? '&nbsp;' : allele.codonMap['37'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['38'] == undefined ? '&nbsp;' : allele.codonMap['38'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['39'] == undefined ? '&nbsp;' : allele.codonMap['39'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['40'] == undefined ? '&nbsp;' : allele.codonMap['40'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['41'] == undefined ? '&nbsp;' : allele.codonMap['41'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['42'] == undefined ? '&nbsp;' : allele.codonMap['42'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['43'] == undefined ? '&nbsp;' : allele.codonMap['43'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['44'] == undefined ? '&nbsp;' : allele.codonMap['44'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['45'] == undefined ? '&nbsp;' : allele.codonMap['45'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['46'] == undefined ? '&nbsp;' : allele.codonMap['46'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['47'] == undefined ? '&nbsp;' : allele.codonMap['47'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['48'] == undefined ? '&nbsp;' : allele.codonMap['48'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['49'] == undefined ? '&nbsp;' : allele.codonMap['49'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['50'] == undefined ? '&nbsp;' : allele.codonMap['50'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['51'] == undefined ? '&nbsp;' : allele.codonMap['51'].hypervariableRegionName" class="codon index">&nbsp;</th><th data-name="allele.codonMap['52'] == undefined ? '&nbsp;' : allele.codonMap['52'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['53'] == undefined ? '&nbsp;' : allele.codonMap['53'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['54'] == undefined ? '&nbsp;' : allele.codonMap['54'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['55'] == undefined ? '&nbsp;' : allele.codonMap['55'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['56'] == undefined ? '&nbsp;' : allele.codonMap['56'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['57'] == undefined ? '&nbsp;' : allele.codonMap['57'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['58'] == undefined ? '&nbsp;' : allele.codonMap['58'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['59'] == undefined ? '&nbsp;' : allele.codonMap['59'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['60'] == undefined ? '&nbsp;' : allele.codonMap['60'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['61'] == undefined ? '&nbsp;' : allele.codonMap['61'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['62'] == undefined ? '&nbsp;' : allele.codonMap['62'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['63'] == undefined ? '&nbsp;' : allele.codonMap['63'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['64'] == undefined ? '&nbsp;' : allele.codonMap['64'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['65'] == undefined ? '&nbsp;' : allele.codonMap['65'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['66'] == undefined ? '&nbsp;' : allele.codonMap['66'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['67'] == undefined ? '&nbsp;' : allele.codonMap['67'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['68'] == undefined ? '&nbsp;' : allele.codonMap['68'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['69'] == undefined ? '&nbsp;' : allele.codonMap['69'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['70'] == undefined ? '&nbsp;' : allele.codonMap['70'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['71'] == undefined ? '&nbsp;' : allele.codonMap['71'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['72'] == undefined ? '&nbsp;' : allele.codonMap['72'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['73'] == undefined ? '&nbsp;' : allele.codonMap['73'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['74'] == undefined ? '&nbsp;' : allele.codonMap['74'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['75'] == undefined ? '&nbsp;' : allele.codonMap['75'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['76'] == undefined ? '&nbsp;' : allele.codonMap['76'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['77'] == undefined ? '&nbsp;' : allele.codonMap['77'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['78'] == undefined ? '&nbsp;' : allele.codonMap['78'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['79'] == undefined ? '&nbsp;' : allele.codonMap['79'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['80'] == undefined ? '&nbsp;' : allele.codonMap['80'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['81'] == undefined ? '&nbsp;' : allele.codonMap['81'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['82'] == undefined ? '&nbsp;' : allele.codonMap['82'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['83'] == undefined ? '&nbsp;' : allele.codonMap['83'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['84'] == undefined ? '&nbsp;' : allele.codonMap['84'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['85'] == undefined ? '&nbsp;' : allele.codonMap['85'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['86'] == undefined ? '&nbsp;' : allele.codonMap['86'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['87'] == undefined ? '&nbsp;' : allele.codonMap['87'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['88'] == undefined ? '&nbsp;' : allele.codonMap['88'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['89'] == undefined ? '&nbsp;' : allele.codonMap['89'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['90'] == undefined ? '&nbsp;' : allele.codonMap['90'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['91'] == undefined ? '&nbsp;' : allele.codonMap['91'].hypervariableRegionName" class="codon index ">&nbsp;</th><th data-name="allele.codonMap['92'] == undefined ? '&nbsp;' : allele.codonMap['92'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['93'] == undefined ? '&nbsp;' : allele.codonMap['93'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['94'] == undefined ? '&nbsp;' : allele.codonMap['94'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['95'] == undefined ? '&nbsp;' : allele.codonMap['95'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['96'] == undefined ? '&nbsp;' : allele.codonMap['96'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['97'] == undefined ? '&nbsp;' : allele.codonMap['97'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['98'] == undefined ? '&nbsp;' : allele.codonMap['98'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['99'] == undefined ? '&nbsp;' : allele.codonMap['99'].hypervariableRegionName" class="codon ">&nbsp;</th><th data-name="allele.codonMap['100'] == undefined ? '&nbsp;' : allele.codonMap['100'].hypervariableRegionName" class="codon ">&nbsp;</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <p style="font-size: x-small;">This application is currently using SAB alleles contained in the following two (2) panels:
<br/>
<br/>1. LABScreen Single Antigen HLA Class II - Group 1 (various lots) [<a href="https://www.onelambda.com/content/dam/onelambda/en/TDX/Documents/securedocs/docs/LOT_SPECIFIC/LS2A01_013_WS.pdf">LS2A01</a>]
<br/>2. LABScreen Single Antigen HLA Class II Supplement (various lots) [<a href="https://www.onelambda.com/content/dam/onelambda/en/TDX/Documents/securedocs/docs/LOT_SPECIFIC/LS2ASP01_004_WS.pdf">LS2ASP01</a>]
<br/>
<br/>The supplemental panel alleles may not be used, depending on which reagent lot is selected.
    </p>
    
    <p><br/>Copyright &copy; 2018, Geoffrey H. Smith, MD
        
</body>

</html>

<script>

var page = 1;
var pageSize = 25;

var sessionId;
var reagentLotNumber; // the single antigen bead reagent lot number
var alleles = []; // the array of alleles
var sabOnly = false; // only show single antigen bead alleles
var matchesHvrCountGe4Only = true; // only show alleles where the match count is ge 4
var selectedOnly = false; // only show selected alleles (clicked)
var reagentLots = [];
var lastSort;

function getSessionId() {
    $("#working").show();
    return $.ajax({
        url: "/hladpb1/resources/session",
        dataType: "text"
    }).then(function(response) {
        sessionId = response;
    });
}

function resetSession() {
    $("#working").show();
    return $.ajax({
        url: "/hladpb1/resources/session/reset",
        dataType: "json",
        type: "PUT",
        contentType: "application/json"
    });
}

// Get reagent lot number.
function getReagentLotNumber() {
    $("#working").show();
    return $.ajax({
        url: "/hladpb1/resources/hypervariableRegions/reagentLotNumber",
        dataType: "text"
    }).then(function(response) {
        reagentLotNumber = response;
    });
}

// Get all alleles.
function getAlleles() {
    $("#working").show();
    return $.ajax({
        url: "/hladpb1/resources/alleles?synonymous=false", // always filter out synonymous alleles
        dataType: "json"
    }).then(function(response) {
        alleles = response;
    });
}

// Put an allele. With this report, this is only used to set the current
// reference allele.
function putAllele(allele) {
    $("#working").show();
    return $.ajax({
        url: "/hladpb1/resources/alleles/" + allele.alleleName,
        dataType: "json",
        type: "PUT",
        contentType: "application/json",
        data: JSON.stringify(allele)
    });
}

function getReagentLots() {
    $("#working").show();
    return $.ajax({
        url: "/hladpb1/resources/reagentLots",
        dataType: "json"
    }).then(function(response) {
        reagentLots = response;
    });
}

function putReagentLot(reagentLot) {
    $("#working").show();
    return $.ajax({
        url: "/hladpb1/resources/session/reagentLot",
        dataType: "json",
        type: "PUT",
        contentType: "application/json",
        data: reagentLot
    });
}

function uploadHaml() {
    var fd = new FormData();
    fd.append("file", $("#hamlFile")[0].files[0]);
    return $.ajax({
       url: "/hladpb1/resources/session/uploadHaml",
       type: "PUT",
       data: fd,
       processData: false,
       contentType: false,
       error: function(jqXHR, textStatus, errorMessage) {
           alert(errorMessage);
           $("#working").hide();           
       }
    });
}  

// Populate rows in the report table from the alleles array. Note that this is
// only done once. All sorting and filtering is done locally. Changing the
// reference allele does involve a getAlleles() call, but the HTML table rows
// are updated in-situ.
function populateTableRows() {
    $("#working").show();
    $("#reportTable tbody tr").remove();
    var rowHtml = [];
    var selectHtml = [];
    var rowNumber = 0;

    // put the reference allele at the top of every page
    {
        var allele = alleles.find(function(allele) { return allele.referenceForMatches; });
        rowHtml.push("<tr data-value='" + allele.alleleName + "' data-sequence='" + allele.sequenceNumber + "' " + (!isRowVisible(allele) ? "style='display: none;'" : "") + ">");
        $("#columnNames th").each(function() {
            var name = $(this).data("name");
            if(name == undefined) {
                rowHtml.push("<td>&nbsp;</td>");
            }
            else {
                var val = eval(name);
                var tagAttributes = $(this)[0].outerHTML;
                tagAttributes = tagAttributes.substring(4, tagAttributes.indexOf(">"));                
                if(name == "allele.mfi") { tagAttributes = " style='text-align: right;'"; }
                rowHtml.push("<td " + tagAttributes + ">" + (val == undefined ? "&nbsp;" : val) + "</td>");
            }
        });
        rowHtml.push("</tr>");
    }
    
    alleles.forEach(function(allele) {
        selectHtml.push("<option value='" + allele.alleleName + "'>" + allele.alleleName + "</option>");
        if(!isRowVisible(allele) || allele.referenceForMatches) {
            return;
        }
        if((rowNumber >= ((page - 1)) * pageSize) && rowNumber < (page * pageSize)) {
            rowHtml.push("<tr data-value='" + allele.alleleName + "' data-sequence='" + allele.sequenceNumber + "' " + (!isRowVisible(allele) ? "style='display: none;'" : "") + ">");
            $("#columnNames th").each(function() {
                var name = $(this).data("name");
                if(name == undefined) {
                    rowHtml.push("<td>&nbsp;</td>");
                }
                else {
                    var val = eval(name);
                    var tagAttributes = $(this)[0].outerHTML;
                    tagAttributes = tagAttributes.substring(4, tagAttributes.indexOf(">"));
                    if(name == "allele.mfi") { tagAttributes = " style='text-align: right;'"; }
                    rowHtml.push("<td " + tagAttributes + ">" + (val == undefined ? "&nbsp;" : val) + "</td>");
                }
            });
            rowHtml.push("</tr>");
        }
        rowNumber++;
    });
    $("#reportTable tbody").append(rowHtml.join(""));
    if($("#referenceAlleleSelect option").length == 0) {
      $("#referenceAlleleSelect").append(selectHtml.join(""));
    }
    if($("#reagentLotNumberSelect option").length == 0) {
      var reagentLotNumberSelectHtml = [];
      reagentLots.forEach(function(reagentLot) {
        reagentLotNumberSelectHtml.push("<option value='" + reagentLot.lotNumber + "'>" + reagentLot.lotNumber + "</option>");
      });
      $("#reagentLotNumberSelect").append(reagentLotNumberSelectHtml.join(""));
    }
}

// Set the UI state based on the hypervariable region matches.
function setUiState() {
    var dfr = $.Deferred();
    $("#working").show();
    setTimeout(function() {
        $("#selectPage").html(""); for(var x = 1; x <= (Math.ceil(alleles.filter(isRowVisible).length / pageSize)); x++) { $("#selectPage").append("<option value = " + x + (x == page ? " selected='true'" : "") + ">" + x + (lastSort == null || lastSort == "alleleNameSort" ? " - " + alleles.filter(isRowVisible)[(x - 1) * pageSize + (alleles.find(function(allele){return allele.referenceForMatches;}).sequenceNumber<alleles.filter(isRowVisible)[(x-1)*pageSize].sequenceNumber ? 1 : 0)].alleleName : "") + "</option>"); }
        $("#inputPageSize").val(pageSize);
        populateTableRows();
        $("#sessionId").html(sessionId);
        $("#imgtDbVersion").html(alleles[0].version);
        $("#reagentLotNumberSelect").val(reagentLotNumber);
        $("#sabFilter").removeClass("filterEnabled");
        if(sabOnly) { $("#sabFilter").addClass("filterEnabled"); }
        $("#matchesHvrCountGe4Filter").removeClass("filterEnabled");
        if(matchesHvrCountGe4Only) { $("#matchesHvrCountGe4Filter").addClass("filterEnabled"); }
        $("#selectionFilter").removeClass("filterEnabled");
        if(selectedOnly) { $("#selectionFilter").addClass("filterEnabled"); }
        $("th a.sort").removeClass("sortEnabled");
        if(lastSort) { $("th a." + lastSort).addClass("sortEnabled"); }
        $("#hypervariableRegionNames").children("th").each(function() {
            // This assumes that the first allele has all hypervariable regions
            // represented.
            var allele = alleles[0];
            $(this).html(eval($(this).data("name")));
        });
        alleles.forEach(function(allele) {
            if(allele.referenceForMatches) {
                $("#referenceAlleleSelect").val(allele.alleleName);
            }
        })
        $("#reportTable tbody tr").each(function() {
            var alleleName = $(this).data("value");
            var allele = alleles.find(function(allele) { return alleleName == allele.alleleName; });
            $(this).removeClass("referenceAllele");
            if(allele.referenceForMatches) {
                $(this).addClass("referenceAllele");
                // This won't work if the reference allele isn't in the current page.
                // I've moved it to just before this block.
                //$("#referenceAlleleSelect").val(allele.alleleName);
            }
            if(allele.selection1) {
                $(this).addClass("selection1");
            }
            if(allele.selection2) {
                $(this).addClass("selection2");
            }
            $(this).children("td").each(function() {
                if($(this).data("name") == "allele.matchesHvrCount") {
                    $(this).html(allele.matchesHvrCount);
                }
                if($(this).hasClass("hvrId")) {
                    $(this).removeClass("mismatch");
                    if(!eval($(this).data("container") + ".matchesReference")) {
                        $(this).addClass("mismatch");
                    }
                }
                if($(this).hasClass("codon") && $(this).html() != "&nbsp;") {
                    $(this).removeClass("mismatch");
                    if(!eval($(this).data("container") + ".matchesReference")) {
                        $(this).addClass("mismatch");
                    }
                    if(eval($(this).data("container") + ".hypervariableRegionName") != null) {
                        $(this).addClass("hypervariableRegion");
                    }
                }
            });
        });
        $("#allelesLoaded").html($("#reportTable tbody tr").length);
        $("#allelesShown").html($("#reportTable tbody tr:visible").length);
        $("#allelesFiltered").html($("#reportTable tbody tr:hidden").length);
        $("#selection1-count").html(alleles.filter(function(allele) { return allele.selection1; }).length);
        $("#selection1and2-count").html(alleles.filter(function(allele) { return allele.selection1 && allele.selection2; }).length);
        $("#selection2-count").html(alleles.filter(function(allele) { return allele.selection2; }).length);
        dfr.resolve();
    }, 1);
    return dfr.promise();
}

// Row filtering function.
function isRowVisible(allele) {
    rowVisible = true;
    if(!allele.referenceForMatches && !allele.selection1 && !allele.selection2) {
        if(sabOnly && !allele.singleAntigenBead)                 { rowVisible = false; }
        if(matchesHvrCountGe4Only && allele.matchesHvrCount < 4) { rowVisible = false; }
        if(selectedOnly) { rowVisible = false; }
    }
    return rowVisible;
}

// Sort function.
var re = /HLA-DPB1\*([0-9]*):(.*)/;
function alleleNameSort(a, b) {
    var A1 = Number((re.exec(a.alleleName))[1]);
    var B1 = Number((re.exec(b.alleleName))[1]);
    if(A1 < B1)      { return -1; }
    else if(A1 > B1) { return  1; }
    else {
        var A2 = (re.exec(a.alleleName))[2];
        var B2 = (re.exec(b.alleleName))[2];
        if(A2 < B2)      { return -1; }
        else if(A2 > B2) { return  1; }
        else { return 0; }
    }
};

// Sort function.
function mfiSort(a, b) {
    var A = a.mfi == null ? -1 : a.mfi;
    var B = b.mfi == null ? -1 : b.mfi;
    if(A < B)      { return 1; }
    else if(A > B) { return -1; }
    else           { return alleleNameSort(a, b); }
}

// Sort function.
function matchesHvrCountSort(a, b) {
    var A = a.matchesHvrCount;
    var B = b.matchesHvrCount;
    if(A < B)      { return  1; }
    else if(A > B) { return -1; }
    else           { return alleleNameSort(a, b); }
}

// Sort function.
var hvrToSort;
function hvrvSort(a, b) {
    var A = a.hvrVariantMap[hvrToSort].variantId.replace("*", "Z");
    var B = b.hvrVariantMap[hvrToSort].variantId.replace("*", "Z");
    if(A < B)      { return -1; }
    else if(A > B) { return  1; }
    else           { return  0; }
}

// Document ready! Let's go...
$(document).ready(function() {

    // Initial population of report table.
    getSessionId().then(getReagentLots).then(getReagentLotNumber).then(getAlleles).then(populateTableRows).then(setUiState).done(function() { $("#working").hide(); });

    $("#resetSessionLink").click(function() {
        sessionId = null;
        reagentLotNumber = null;
        alleles = [];
        sabOnly = false;
        matchesHvrCountGe4Only = true;
        selectedOnly = false;
        reagentLots = [];
        lastSort = null;
        resetSession().then(getSessionId).then(getReagentLots).then(getReagentLotNumber).then(getAlleles).then(populateTableRows).then(setUiState).done(function() { $("#working").hide(); });
    });

    // Select a reference allele from the list. Handled by web service.
    $("#referenceAlleleSelect").change(function() {
        var alleleName = $(this).val();
        var allele = alleles.find(function(allele) { return alleleName == allele.alleleName; });
        allele.referenceForMatches = true;
        page = 1;
        lastSort = null;
        putAllele(allele).then(getAlleles).then(setUiState).done(function() { $("#working").hide(); } );
    });

    // Left-click on a row to mark it. (Using one color for selection1...)
    $("#reportTable tbody").on("click", "tr", function() {
        var alleleName = $(this).data("value");
        var allele = alleles.find(function(allele) { return alleleName == allele.alleleName; });
        //if(allele.referenceForMatches) {
        //    return;
        //}
        allele.selection1 = !allele.selection1;
        if(allele.selection1) {
          $(this).addClass("selection1");
        }
        else {
          $(this).removeClass("selection1");
        }
        $("#selection1-count").html(alleles.filter(function(allele) { return allele.selection1; }).length);
        $("#selection1and2-count").html(alleles.filter(function(allele) { return allele.selection1 && allele.selection2; }).length);
        $("#selection2-count").html(alleles.filter(function(allele) { return allele.selection2; }).length);
        putAllele(allele).done(function() { $("#working").hide(); } );
    });

    // Righs-click on a row to mark it. (...and another color for selection2.)
    $("#reportTable tbody").on("contextmenu", "tr", function() {
        var alleleName = $(this).data("value");
        var allele = alleles.find(function(allele) { return alleleName == allele.alleleName; });
        //if(allele.referenceForMatches) {
        //    return false;
        //}
        allele.selection2 = !allele.selection2;
        if(allele.selection2) {
          $(this).addClass("selection2");
        }
        else {
          $(this).removeClass("selection2");
        }
        $("#selection1-count").html(alleles.filter(function(allele) { return allele.selection1; }).length);
        $("#selection1and2-count").html(alleles.filter(function(allele) { return allele.selection1 && allele.selection2; }).length);
        $("#selection2-count").html(alleles.filter(function(allele) { return allele.selection2; }).length);
        putAllele(allele).done(function() { $("#working").hide(); } );
        return false; // don't show context menu
    });

    // Single antigen bead filter toggle on/off. This is handled locally.
    $("#sabFilter").click(function() {
        $("#working").show();
        setTimeout(function() {
            sabOnly = !sabOnly;
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });

    // Refilter. This is helpful if you select/unselect while the select filter
    // is turned on.
    $("#refilter").click(function() {
        $("#working").show();
        setTimeout(function() {
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });

    // Match count filter toggle on/off. This is handled locally.
    $("#matchesHvrCountGe4Filter").click(function() {
        $("#working").show();
        setTimeout(function() {
            matchesHvrCountGe4Only = !matchesHvrCountGe4Only;
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });

    // Selected filter toggle on/off. This is handled locally.
    $("#selectionFilter").click(function() {
        $("#working").show();
        setTimeout(function() {
            selectedOnly = !selectedOnly;
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });

    // Click on sort. This is handled locally.
    $("th a.alleleNameSort").click(function() {
        $("#working").show();
        setTimeout(function() {
            lastSort = "alleleNameSort";
            alleles.sort(alleleNameSort);
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });
    
    // Click on sort. This is handled locally.
    $("th a.mfiSort").click(function() {
        $("#working").show();
        setTimeout(function() {
            lastSort = "mfiSort";
            alleles.sort(mfiSort);
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });
    
    // Click on sort. This is handled locally.
    $("th a.matchesSort").click(function() {
        $("#working").show();
        setTimeout(function() {
            lastSort = "matchesSort";
            alleles.sort(matchesHvrCountSort);
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });

    // Click on sort. This is handled locally.
    $("th a.hvrvSort").click(function() {
        $("#working").show();
        hvrToSort = $(this).data("hvr");
        setTimeout(function() {
            lastSort = "hvrvSort-" + hvrToSort;
            alleles.sort(hvrvSort);
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });
        
    $("#selectPage").change(function() {
        $("#working").show();
        setTimeout(function() {
            page = $("#selectPage").val();
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });

    $("#linkPrevPage").click(function() {
        $("#working").show();
        setTimeout(function() {
            if(page > 1) {
                page--;
                $("#selectPage").val(page);
                setUiState().done(function() { $("#working").hide(); });
            }
            else {
                $("#working").hide();                
            }
        }, 1);
    });

    $("#linkNextPage").click(function() {
        $("#working").show();
        setTimeout(function() {
            if(page < Math.ceil(alleles.filter(isRowVisible).length / pageSize)) {
                page++;
                $("#selectPage").val(page);
                setUiState().done(function() { $("#working").hide(); });
            }
            else {
                $("#working").hide();                
            }
        }, 1);
    });

    $("#inputPageSize").change(function() {
        $("#working").show();
        setTimeout(function() {
            pageSize = $("#inputPageSize").val();
            page = 1;
            $("#selectPage").val(1);
            setUiState().done(function() { $("#working").hide(); });
        }, 1);
    });

    $("#reagentLotNumberSelect").change(function() {
        reagentLotNumber = $(this).val();
        putReagentLot(reagentLotNumber).done(function() { window.location.reload(); } );
    });

    $("#uploadHamlButton").click(function() {
        $("#working").show();
        if($("#hamlFile")[0].files.length > 0) {
            uploadHaml().done(function() { window.location.reload(); });
        }
    });

});

</script>
